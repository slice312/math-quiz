(()=>{var e={484:function(e){e.exports=function(){"use strict";var e=6e4,t=36e5,n="millisecond",r="second",a="minute",o="hour",s="day",i="week",l="month",c="quarter",d="year",m="date",u="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},f=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},v={s:f,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),a=n%60;return(t<=0?"+":"-")+f(r,2,"0")+":"+f(a,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),a=t.clone().add(r,l),o=n-a<0,s=t.clone().add(r+(o?-1:1),l);return+(-(r+(n-a)/(o?a-s:s-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:d,w:i,d:s,D:m,h:o,m:a,s:r,ms:n,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",b={};b[y]=g;var $=function(e){return e instanceof M},w=function e(t,n,r){var a;if(!t)return y;if("string"==typeof t){var o=t.toLowerCase();b[o]&&(a=o),n&&(b[o]=n,a=o);var s=t.split("-");if(!a&&s.length>1)return e(s[0])}else{var i=t.name;b[i]=t,a=i}return!r&&a&&(y=a),a||!r&&y},S=function(e,t){if($(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new M(n)},_=v;_.l=w,_.i=$,_.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var M=function(){function g(e){this.$L=w(e.locale,null,!0),this.parse(e)}var f=g.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(_.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(h);if(r){var a=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],a,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],a,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return _},f.isValid=function(){return!(this.$d.toString()===u)},f.isSame=function(e,t){var n=S(e);return this.startOf(t)<=n&&n<=this.endOf(t)},f.isAfter=function(e,t){return S(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<S(e)},f.$g=function(e,t,n){return _.u(e)?this[t]:this.set(n,e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,t){var n=this,c=!!_.u(t)||t,u=_.p(e),h=function(e,t){var r=_.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return c?r:r.endOf(s)},p=function(e,t){return _.w(n.toDate()[e].apply(n.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},g=this.$W,f=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case d:return c?h(1,0):h(31,11);case l:return c?h(1,f):h(0,f+1);case i:var b=this.$locale().weekStart||0,$=(g<b?g+7:g)-b;return h(c?v-$:v+(6-$),f);case s:case m:return p(y+"Hours",0);case o:return p(y+"Minutes",1);case a:return p(y+"Seconds",2);case r:return p(y+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(e,t){var i,c=_.p(e),u="set"+(this.$u?"UTC":""),h=(i={},i[s]=u+"Date",i[m]=u+"Date",i[l]=u+"Month",i[d]=u+"FullYear",i[o]=u+"Hours",i[a]=u+"Minutes",i[r]=u+"Seconds",i[n]=u+"Milliseconds",i)[c],p=c===s?this.$D+(t-this.$W):t;if(c===l||c===d){var g=this.clone().set(m,1);g.$d[h](p),g.init(),this.$d=g.set(m,Math.min(this.$D,g.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[_.p(e)]()},f.add=function(n,c){var m,u=this;n=Number(n);var h=_.p(c),p=function(e){var t=S(u);return _.w(t.date(t.date()+Math.round(e*n)),u)};if(h===l)return this.set(l,this.$M+n);if(h===d)return this.set(d,this.$y+n);if(h===s)return p(1);if(h===i)return p(7);var g=(m={},m[a]=e,m[o]=t,m[r]=1e3,m)[h]||1,f=this.$d.getTime()+n*g;return _.w(f,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||u;var r=e||"YYYY-MM-DDTHH:mm:ssZ",a=_.z(this),o=this.$H,s=this.$m,i=this.$M,l=n.weekdays,c=n.months,d=function(e,n,a,o){return e&&(e[n]||e(t,r))||a[n].slice(0,o)},m=function(e){return _.s(o%12||12,e,"0")},h=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:i+1,MM:_.s(i+1,2,"0"),MMM:d(n.monthsShort,i,c,3),MMMM:d(c,i),D:this.$D,DD:_.s(this.$D,2,"0"),d:String(this.$W),dd:d(n.weekdaysMin,this.$W,l,2),ddd:d(n.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(o),HH:_.s(o,2,"0"),h:m(1),hh:m(2),a:h(o,s,!0),A:h(o,s,!1),m:String(s),mm:_.s(s,2,"0"),s:String(this.$s),ss:_.s(this.$s,2,"0"),SSS:_.s(this.$ms,3,"0"),Z:a};return r.replace(p,(function(e,t){return t||g[e]||a.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(n,m,u){var h,p=_.p(m),g=S(n),f=(g.utcOffset()-this.utcOffset())*e,v=this-g,y=_.m(this,g);return y=(h={},h[d]=y/12,h[l]=y,h[c]=y/3,h[i]=(v-f)/6048e5,h[s]=(v-f)/864e5,h[o]=v/t,h[a]=v/e,h[r]=v/1e3,h)[p]||v,u?y:_.a(y)},f.daysInMonth=function(){return this.endOf(l).$D},f.$locale=function(){return b[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=w(e,t,!0);return r&&(n.$L=r),n},f.clone=function(){return _.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},g}(),C=M.prototype;return S.prototype=C,[["$ms",n],["$s",r],["$m",a],["$H",o],["$W",s],["$M",l],["$y",d],["$D",m]].forEach((function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),S.extend=function(e,t){return e.$i||(e(t,M,S),e.$i=!0),S},S.locale=w,S.isDayjs=$,S.unix=function(e){return S(1e3*e)},S.en=b[y],S.Ls=b,S.p={},S}()}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{state:()=>o});const t=Object.freeze({TimeAttack:"timeAttack",Practice:"practice"}),r="leaderboard",a="player",o={playerName:"",gameMode:t.TimeAttack,score:0,level:1,correctCount:0,incorrectCount:0},s=e=>(new DOMParser).parseFromString(e,"text/html"),i=e=>document.getElementById("root").appendChild(e),l=()=>{(()=>{const e=s('\n        <div class="modal-about" id="modal-about">\n            <div class="modal-about__wrapper">\n                <div class="modal-about__container animate animate__zoomIn" id="modal-about-container">\n                    <form class="modal-about__content">\n                        <button class="btn-default modal-about__btn-close" id="modal-order-close-btn" type="button">\n                            <img src="./src/assets/icons/x-mark.svg" alt="x-mark">\n                        </button>\n                        <h2 class="modal-about__title">\n                            About\n                        </h2>\n                        <h3 class="modal-about__sub-title">\n                            Rules:\n                        </h3>\n                        <p>\n                            This is a math quiz, solve examples and earn points.\n                        </p>\n                        <p>\n                            In practice mode, you can endlessly solve examples.\n                        </p>\n                        <p>\n                            In attack mode, you have a minute and 30 seconds, go ahead and become the best\n                        </p>\n                    </form>\n                </div>\n            </div>\n        </div>\n    '),t=i(e.body.firstChild);document.getElementById("modal-order-close-btn").onclick=()=>{t.remove()}})()},c=e=>{const t=document.getElementById("main-menu");t.elements.name.value=t.elements.name.value.trim(),o.gameMode=t.elements.gameMode.value,o.playerName=t.elements.name.value,window.localStorage.setItem(a,o.playerName),t.checkValidity()&&(e.preventDefault(),T.navigate("main-game-screen"))},d=(e,t)=>String(e).padStart(t,"0"),m=(e,t)=>Math.round(Math.random()*(t-e)+e);class u{#e;#t;#n;#r;#a;set onTick(e){this.#e=e}set onComplete(e){this.#t=e}start(e){this.#r=this.#n=e,this.#o(),this.#a=setInterval(this.#o.bind(this),1e3)}stop(){clearInterval(this.#a),this.#t?.()}#o(){this.#r<=0?this.stop():(this.#r-=1,this.#e?.(this.#r,this.#n))}}class h{static#s=["+","-","*","/"];#i;generateExpression(){const e=m(1,10),t=m(1,10),n=h.#s[m(0,3)];return"/"===n?{num1:e*t,num2:t,operator:n,result:e}:{num1:e,num2:t,operator:n,result:this.getResult(e,t,n)}}getResult(e,t,n){switch(n){case"+":return e+t;case"-":return e-t;case"*":return e*t;case"/":return e/t;default:throw new Error(`Unexpected operator: ${n}`)}}}var p=n(484),g=n.n(p);const f=async e=>{console.log(`sendGameResult ${g()().format("DD.MM.YYYY hh:mm:ss")}`);const t=((e,t)=>{if(!e)return[t];const n=e.find((e=>e.name===t.name&&e.mode===t.mode));return n?n.score=Math.max(n.score,t.score):e.push(t),e})(JSON.parse(window.localStorage.getItem(r)),e);return window.localStorage.setItem(r,JSON.stringify(t)),"success"},v=t=>{(()=>{const e=s('\n        <div class="modal-game-result" id="modal-game-result">\n            <div class="modal-game-result__wrapper">\n                <div class="modal-game-result__container animate animate__zoomIn" id="modal-order-container">\n                    <form class="modal-game-result__content">\n                        <h2 class="modal-game-result__title">\n                            Game Over!\n                        </h2>\n                        <p class="modal-game-result__level-label">\n                            Level: <span id="modal-game-result-level">1</span>\n                        </p>\n                        <p class="modal-game-result__score-label">Your score:</p>\n                        <p class="modal-game-result__score-value" id="modal-game-result-score">\n                            0\n                        </p>\n                        <div class="modal-game-result__correct-count">\n                            <p>\n                                Correct: <span id="modal-game-result-correct-count">0</span>\n                            </p>\n                            <p>\n                                Incorrect: <span id="modal-game-result-incorrect-count">0</span>\n                            </p>\n                        </div>\n        \n                        <div class="modal-game-result__buttons">\n                            <div>\n                                <app-link class="btn-default" href="./">\n                                    Home\n                                </app-link>\n                                <app-link class="btn-default" href="./leaderboard?fromGame=true">\n                                    Leaderboard\n                                </app-link>\n                            </div>\n                            <button class="btn-default" id="btn-play-again" type="button">\n                                Play again\n                            </button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    ');i(e.body.firstChild)})(),(()=>{const t={level:document.getElementById("modal-game-result-level"),score:document.getElementById("modal-game-result-score"),correct:document.getElementById("modal-game-result-correct-count"),incorrect:document.getElementById("modal-game-result-incorrect-count")},{state:n}=e;t.level.textContent=String(n.level),t.score.textContent=String(n.score),t.correct.textContent=String(n.correctCount),t.incorrect.textContent=String(n.incorrectCount)})(),(e=>{const t=document.getElementById("modal-game-result"),n=document.getElementById("modal-order-container");document.getElementById("btn-play-again").onclick=()=>{n.classList.add("animate__zoomOut"),n.onanimationstart=()=>{t.style.background="transparent"},n.onanimationend=()=>{t.remove(),n.classList.remove("animate__zoomOut"),n.onanimationend=null},e?.()}})(t)};let y,b,$;const w=()=>{const e=document.getElementById("game-screen-timer");o.gameMode===t.Practice?e.style.display="none":e.style.display="block"},S=()=>{M(),y?.start(90);let e=C();$.onsubmit=t=>{t.preventDefault(),$.elements.result.value&&(Number($.elements.result.value)===e.result?k():E(),e=C())}},_=()=>{v((()=>S())),D()},M=()=>{o.level=1,document.getElementById("game-screen-level-label").textContent=String(o.level),o.score=0,x(!1),o.correctCount=0,o.incorrectCount=0},C=()=>{const e=document.getElementById("game-screen-expr-wrap");e.classList.add("animate__fadeOutLeft"),window.requestAnimationFrame((()=>{e.classList.remove("animate__fadeOutLeft"),$.elements.result.value=""}));const t=b.generateExpression();return I(t),t},I=e=>{const t=document.getElementById("game-screen-ex-left"),n=document.getElementById("game-screen-ex-op"),r=document.getElementById("game-screen-ex-right");t.textContent=e.num1,n.textContent=e.operator,r.textContent=e.num2},k=()=>{o.score+=1,o.correctCount+=1;const e=document.getElementById("game-screen-score-label-plus");e.classList.add("label_lift-up"),e.onanimationend=()=>{e.classList.remove("label_lift-up"),e.onanimationend=null},x(!1)},E=()=>{o.score=Math.max(o.score-1,0),o.incorrectCount+=1;const e=document.getElementById("game-screen-score-label-minus");e.classList.add("label_lift-up"),e.onanimationend=()=>{e.classList.remove("label_lift-up"),e.onanimationend=null},x(!0)},x=e=>{if(e){const e=document.getElementById("game-screen-score-label");e.classList.add("animate__shakeX"),e.onanimationend=()=>{e.classList.remove("animate__shakeX"),e.onanimationend=null}}document.getElementById("game-screen-score-value").textContent=String(o.score)},D=async()=>{const e=await f({name:o.playerName,mode:o.gameMode,level:o.level,score:o.score});console.log(e)},A=()=>{const e=document.getElementById("leaderboard-mode-selector"),t=Array.from(e.options).find((e=>e.selected)).value,n=O(t);L(n)},O=e=>JSON.parse(window.localStorage.getItem(r))?.filter((t=>t.mode===e))??[],L=e=>{const t=document.getElementById("leaderboard-table");for(;t.lastChild;)t.removeChild(t.lastChild);e.sort(((e,t)=>t.score-e.score));for(const n of e){const e=document.createElement("div");e.classList.add("leaderboard__table-row"),t.appendChild(e);const r=document.createElement("span");r.textContent=n.name,e.appendChild(r);const a=document.createElement("span");a.textContent=String(n.level),e.appendChild(a);const o=document.createElement("span");o.textContent=String(n.score),e.appendChild(o)}},B={404:{template:"./src/templates/404.html",render:null,title:"",description:""},"/":{template:"./src/pages/main-menu/index.html",render:()=>{document.getElementById("main-menu").elements.name.value=o.playerName,document.getElementById("main-menu-btn-play").onclick=c,document.getElementById("main-menu-btn-about").onclick=l},title:"",description:""},"/main-game-screen":{template:"./src/pages/main-game-screen/index.html",render:()=>{y=(()=>{if(o.gameMode===t.Practice)return null;const e=document.getElementById("game-screen-timer-label"),n=document.getElementById("game-screen-timer-circle"),r=2*n.getAttribute("r")*Math.PI;n.setAttribute("stroke-dasharray",String(r));const a=new u;a.onTick=(e,t)=>{s(e),n.setAttribute("stroke-dashoffset",String(r*e/t-r))};const s=t=>{const n=d(Math.floor(t/60),2),r=d(t%60,2);e.textContent=`${n}:${r}`};return a.onComplete=()=>{_()},a})(),b=new h,$=document.getElementById("game-screen-task-form"),document.getElementById("game-screen-player-name").textContent=o.playerName,document.getElementById("game-screen-btn-stop").onclick=()=>{y&&(y.onComplete=null,y.stop()),_()},w(),document.getElementById("game-screen-result-input").focus(),S()},title:"Quiz",description:""},"/leaderboard":{template:"./src/pages/leaderboard/index.html",render:()=>{new URL(window.location).searchParams.get("fromGame")||(document.getElementById("leaderboard-btn-play").style.display="none"),(()=>{const e=document.getElementById("leaderboard-mode-selector");Array.from(e.options).find((e=>e.value===o.gameMode)).selected=!0,e.onchange=A})(),A()},title:"Leaderboard",description:""}},T=new class{#l;constructor(e){this.#l=e}init(){const e=e=>this.#c(e);window.addEventListener("popstate",e),window.addEventListener("hashchange",e),window.addEventListener("load",e)}#c(e){e.preventDefault(),window.history.pushState({},"",e.target.href),this.#d()}async#d(){const e=this.getCurrentUrlPath(),t=this.#l[e],n=await fetch(t.template).then((e=>e.text()));(e=>{const t=document.getElementById("root");for(;t.lastChild;)t.removeChild(t.lastChild);t.appendChild(e)})(s(n).body.firstChild),t.render&&t.render()}getCurrentUrlPath(){const e=window.location.pathname;return e.indexOf("/math-quiz")>=0?e.replace("/math-quiz",""):e}navigate(e){window.history.pushState({},"",e),this.#d()}}(B);class P extends HTMLElement{constructor(){super()}connectedCallback(){this.addEventListener("click",(()=>{const e=this.getAttribute("href");T.navigate(e)}),!1)}}const H=[{name:"Aterm",mode:t.Practice,level:1,score:4},{name:"Nurz",mode:t.TimeAttack,level:1,score:4},{name:"Talgat",mode:t.Practice,level:1,score:4},{name:"Tala",mode:t.TimeAttack,level:1,score:4},{name:"Sardor",mode:t.TimeAttack,level:1,score:3},{name:"Hurma",mode:t.TimeAttack,level:1,score:4},{name:"DeRosa",mode:t.TimeAttack,level:2,score:55},{name:"Colnago",mode:t.TimeAttack,level:2,score:74},{name:"Orbea",mode:t.TimeAttack,level:2,score:43},{name:"Cute",mode:t.TimeAttack,level:2,score:76},{name:"Slice Mem",mode:t.TimeAttack,level:2,score:21},{name:"SliceHo",mode:t.TimeAttack,level:2,score:44},{name:"Kern",mode:t.Practice,level:3,score:12},{name:"Aterm7",mode:t.Practice,level:1,score:4},{name:"Aterm5",mode:t.Practice,level:1,score:4},{name:"Aterm23",mode:t.Practice,level:1,score:4},{name:"Aterm24",mode:t.Practice,level:1,score:4},{name:"Aterm25",mode:t.Practice,level:1,score:4},{name:"Aterm31",mode:t.Practice,level:1,score:4},{name:"Aterm35",mode:t.Practice,level:1,score:4}];console.log("PAGE LOADING"),document.addEventListener("DOMContentLoaded",(()=>{T.init(),window.customElements.define("app-link",P),window.App||(window.App={}),window.App.mockFillLeaderBoard=()=>{window.localStorage.setItem(r,JSON.stringify(H))},window.App.gameSession=o;const e=window.localStorage.getItem(a);e&&(o.playerName=e)}))})()})();